<section>
    <div class="title">
        <h1>Список задач</h1>
        <button mat-flat-button (click)="addNewTask()">Добавить задачу</button>
    </div>
        <div>
            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Menu sorting" >
                <mat-icon>sort</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="sortByTitle()">
                    <mat-icon>sort_by_alpha</mat-icon>
                    <span>По Алфавиту</span>
                </button>
                <button mat-menu-item (click)="sortByStatus()">
                    <mat-icon>done_outline</mat-icon>
                    <span>По статусу задачи</span>
                </button>
            </mat-menu>

            <mat-form-field class="form-field">
                <mat-label>Поиск</mat-label>
                <input matInput 
                [(ngModel)]="searchText"
                (input)="applyFilter()" 
                placeholder="Поиск">
            </mat-form-field>

            <ol class="task-list">
                @for (task of displayedTasks; track task; let i = $index) {
                    <li class="task-item">
                        <span class="task-number">{{ i + 1 }}.</span> 
                        <span class="task-title" [class.completed]="task.status">{{ task.title }}</span>
                        
                        <div class="task-actions">
                            <button mat-mini-fab  (click)="navigateToTask(task.id)">
                                <mat-icon>details</mat-icon>
                            </button>	
                            <button mat-mini-fab (click)="deleteTask(task.id)">
                                <mat-icon>delete</mat-icon>
                            </button>
                            <mat-checkbox [checked]="task.status" (change)="toggleCompletion(task.id, $event.checked)"></mat-checkbox>
                        </div>
                    </li>
                }
            </ol>   
        </div>
</section>